// Map from external http client library to internal http client wrapper implementation in order of preference
const libToImplementation = {
    "axios": "./AxiosHttpClient",
    "node-fetch": "./NodeFetchHttpClient"
};

function createHttpClient() {
    for (const [lib, impl] of Object.entries(libToImplementation)) {
        try {
            require(lib);
        } catch (e) {
            // lib not found
            continue;
        }

        const HttpClient = require(impl);
        return new HttpClient();
    }
    
    throw new Error(`This module requires one of the following http clients: ${Object.keys(libToImplementation)}.`);
}

module.exports =  createHttpClient();
const axios = require("axios");

async function run(request) {
    //Axios will send an exception on it's own for a failed http response
    const result = await axios(request);
    return result.data;
}

module.exports = class AxiosHttpClient {
  uploadDCL(request) {
    const axios_request = {      
      method: request.method,
      url: request.url,
      headers: request.headers,
      data: request.body,
      httpsAgent: request.agent
    };

    return run(axios_request);
  }

  async downloadBundle(request) {
    const axios_request = {
      responseType: "arraybuffer",
      method: request.method,
      url: request.url,
      headers: request.headers,
      httpsAgent: request.agent
    };

    return await run(axios_request);
  }
};

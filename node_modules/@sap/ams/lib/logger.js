let LOG;
try {
    const cds = require("@sap/cds");
    LOG = cds?.log("ams");
} catch (e) { 
    // Running outside CAP -> -> create winston logger with [ams] prefix
    const winston = require("winston");

    const amsPrefixFormatter = winston.format((info) => {
        info.message = `[ams] ${info.message}`;
        return info;
    });

    LOG = winston.createLogger({
        format: winston.format.combine(
            amsPrefixFormatter(),
            winston.format.simple()
        ),
        transports: [
            new winston.transports.Console()
        ]
    });
}

module.exports = LOG;
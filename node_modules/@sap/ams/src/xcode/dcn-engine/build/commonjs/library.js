"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.processUnknownIgnore = processUnknownIgnore;
var _unsetignoreprocessor = _interopRequireDefault(require("./core/unsetignoreprocessor.js"));
var _decision = _interopRequireDefault(require("./decision.js"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
/**
 * sets all comparisons with variabled contained in ignore to true 
 * to false if variable is neither contained in ignore nor in unkown.
 * this makes sure that the resulting decision only contains unresolved variables
 * that are listed in 'unkown'.
 * @param {Decision} decision 
 * @param {String[]} unknown 
 * @param {String[]} ignore 
 * @returns {Decision}
 */
function processUnknownIgnore(decision, unknown, ignore) {
  if (!decision.__internal__condition) {
    throw new Error("empty decicion");
  }
  const unset = decision.__internal__condition.variables.filter(v => !unknown.includes(v));
  if (ignore.length == 0 && unset.length == 0) {
    return decision;
  }
  let result = new _decision.default();
  result.__internal__condition = _unsetignoreprocessor.default.evaluate(decision.__internal__condition, unknown, ignore);
  return result;
}